{% extends 'base.html' %}
{% load widget_tweaks %}

{% block title %}Cat치logo{% endblock %}

{% block content %}
<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2"><i class="fas fa-book"></i> Cat치logo</h1>
</div>

<ul class="nav nav-tabs" id="catalogoTabs" role="tablist">
    <li class="nav-item" role="presentation">
        <button class="nav-link active" id="productos-tab" data-bs-toggle="tab" data-bs-target="#productos" type="button">
            <i class="fas fa-box"></i> Productos
        </button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="clientes-tab" data-bs-toggle="tab" data-bs-target="#clientes" type="button">
            <i class="fas fa-users"></i> Clientes
        </button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="proveedores-tab" data-bs-toggle="tab" data-bs-target="#proveedores" type="button">
            <i class="fas fa-truck"></i> Proveedores
        </button>
    </li>
</ul>

<div class="tab-content mt-4" id="catalogoTabsContent">
    <!-- Productos -->
    <div class="tab-pane fade show active" id="productos">
        {% include 'gestion/catalogo/productos.html' %}
    </div>

    <!-- Clientes -->
    <div class="tab-pane fade" id="clientes">
        {% include 'gestion/catalogo/clientes.html' %}
    </div>

    <!-- Proveedores -->
    <div class="tab-pane fade" id="proveedores">
        {% include 'gestion/catalogo/proveedores.html' %}
    </div>
</div>

<script>
// Activar la pesta침a desde URL
document.addEventListener('DOMContentLoaded', function() {
    const urlParams = new URLSearchParams(window.location.search);
    const tab = urlParams.get('tab');
    
    if (tab) {
        const triggerEl = document.querySelector(`#${tab}-tab`);
        if (triggerEl) {
            const tabInstance = new bootstrap.Tab(triggerEl);
            tabInstance.show();
        }
    }
    
    // Mantener la pesta침a activa al recargar
    const triggerTabList = document.querySelectorAll('#catalogoTabs button');
    triggerTabList.forEach(triggerEl => {
        triggerEl.addEventListener('click', function() {
            const currentTab = this.getAttribute('data-bs-target').replace('#', '');
            const url = new URL(window.location);
            url.searchParams.set('tab', currentTab);
            window.history.replaceState({}, '', url);
        });
    });
});
</script>
{% endblock %}
